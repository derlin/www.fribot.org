window.autosave=function(){return!0},function(a,s){function i(t){var e=(new Date).getTime(),n=[],o="undefined"!=typeof tinymce&&tinymce.get("content");return o&&!o.isHidden()&&j<e-3e3&&(o.save(),j=e),e={post_id:a("#post_ID").val()||0,post_type:a("#post_type").val()||"",post_author:a("#post_author").val()||"",post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""},"local"===t||(a('input[id^="in-category-"]:checked').each(function(){n.push(this.value)}),e.catslist=n.join(","),(t=a("#post_name").val())&&(e.post_name=t),(t=a("#parent_id").val())&&(e.parent_id=t),a("#comment_status").prop("checked")&&(e.comment_status="open"),a("#ping_status").prop("checked")&&(e.ping_status="open"),"1"===a("#auto_draft").val()&&(e.auto_draft="1")),e}function r(t){return"object"==typeof t?(t.post_title||"")+"::"+(t.content||"")+"::"+(t.excerpt||""):(a("#title").val()||"")+"::"+(a("#content").val()||"")+"::"+(a("#excerpt").val()||"")}function c(){B.trigger("autosave-disable-buttons"),setTimeout(n,5e3)}function n(){B.trigger("autosave-enable-buttons")}function u(){w=!0,s.clearTimeout(e),e=s.setTimeout(function(){w=!1},1e4)}function o(){y=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}function p(){var t=!1;return t=C&&k?(t=sessionStorage.getItem("wp-autosave-"+k))?JSON.parse(t):{}:t}function l(){var t=p();return t&&I&&t["post_"+I]||!1}function v(t){var e=p();if(!e||!I)return!1;if(t)e["post_"+I]=t;else{if(!e.hasOwnProperty("post_"+I))return!1;delete e["post_"+I]}return t=e,!(!C||!k)&&(e="wp-autosave-"+k,sessionStorage.setItem(e,JSON.stringify(t)),null!==sessionStorage.getItem(e))}function d(t){var e,n;return!(T||!C)&&(t?(e=l()||{},a.extend(e,t)):e=i("local"),(t=r(e))!==(D=void 0===D?m:D)&&(e.save_time=(new Date).getTime(),e.status=a("#post_status").val()||"",(n=v(e))&&(D=t),n))}function f(t,e){function n(t){return t.toString().replace(/[\x20\t\r\n\f]+/g,"")}return n(t||"")===n(e||"")}function t(){var t,e,n,o=l();if(wpCookies.get("wp-saving-post")===I+"-saved")return wpCookies.remove("wp-saving-post"),void v(!1);o&&(a("#has-newer-autosave").length||(t=a("#content").val()||"",e=a("#title").val()||"",n=a("#excerpt").val()||"",f(t,o.content)&&f(e,o.post_title)&&f(n,o.excerpt)||(x=o,S={content:t,post_title:e,excerpt:n},n=a("#local-storage-notice"),a(".wrap h2").first().after(n.addClass("updated").show()),n.on("click.autosave-local",function(t){var e=a(t.target);e.hasClass("restore-backup")?(g(x),e.parent().hide(),a(this).find("p.undo-restore").show()):e.hasClass("undo-restore-backup")&&(g(S),e.parent().hide(),a(this).find("p.local-restore").show()),t.preventDefault()}))))}function g(t){var e;return t&&(D=r(t),a("#title").val()!==t.post_title&&a("#title").focus().val(t.post_title||""),a("#excerpt").val(t.excerpt||""),(e="undefined"!=typeof tinymce&&tinymce.get("content"))&&!e.isHidden()&&"undefined"!=typeof switchEditors?(e.undoManager.add(),e.setContent(t.content?switchEditors.wpautop(t.content):"")):(a("#content-html").click(),a("#content").val(t.content)),1)}var m,w,e,h,_,y,b,x,S,k,I,C,D,T,j,B;s.wp=s.wp||{},s.wp.autosave=(j=0,(B=a(document)).on("tinymce-editor-init.autosave",function(t,e){"content"===e.id&&s.setTimeout(function(){e.save(),m=r()},1e3)}).ready(function(){m=r()}),{getPostData:i,getCompareString:r,disableButtons:c,enableButtons:n,local:(T=!1,k=void 0!==s.autosaveL10n&&s.autosaveL10n.blog_id,function(){var t=Math.random().toString(),e=!1;try{s.sessionStorage.setItem("wp-test",t),e=s.sessionStorage.getItem("wp-test")===t,s.sessionStorage.removeItem("wp-test")}catch(t){}return C=e}()&&k&&(a("#content").length||a("#excerpt").length)&&B.ready(function(){I=a("#post_ID").val()||0,a("#wp-content-wrap").hasClass("tmce-active")?B.on("tinymce-editor-init.autosave",function(){s.setTimeout(function(){t()},1500)}):t(),s.setInterval(d,15e3),a("form#post").on("submit.autosave-local",function(){var t="undefined"!=typeof tinymce&&tinymce.get("content"),e=a("#post_ID").val()||0;t&&!t.isHidden()?t.on("submit",function(){d({post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""})}):d({post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""}),wpCookies.set("wp-saving-post",e+"-check",86400)})}),{hasStorage:C,getSavedPostData:l,save:d,suspend:function(){T=!0},resume:function(){T=!1}}),server:(y=0,b=!1,B.on("heartbeat-send.autosave",function(t,e){var n,o,n=!(b||w||!s.autosave())&&(!((new Date).getTime()<y)&&((o=r(n=i()))!==(_=void 0===_?m:_)&&(h=o,u(),c(),B.trigger("wpcountwords",[n.content]).trigger("before-autosave",[n]),n._wpnonce=a("#_wpnonce").val()||"",n)));n&&(e.wp_autosave=n)}).on("heartbeat-tick.autosave",function(t,e){e.wp_autosave&&(e=e.wp_autosave,o(),w=!1,_=h,h="",B.trigger("after-autosave",[e]),n(),e.success&&a("#auto_draft").val(""))}).on("heartbeat-connection-lost.autosave",function(t,e,n){"timeout"!==e&&603!==n||(n=a("#lost-connection-notice"),wp.autosave.local.hasStorage||n.find(".hide-if-no-sessionstorage").hide(),n.show(),c())}).on("heartbeat-connection-restored.autosave",function(){a("#lost-connection-notice").hide(),n()}).ready(function(){o()}),{tempBlockSave:u,triggerSave:function(){y=0,wp.heartbeat.connectNow()},postChanged:function(){return r()!==m},suspend:function(){b=!0},resume:function(){b=!1}})})}(jQuery,window);